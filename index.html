<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextLogicAI - Free AI Content Rewriter</title>
    <meta name="description" content="Transform your content with NextLogicAI's AI-powered rewriter. Turn blog posts into engaging Twitter threads, professional emails, SEO blog posts, and more. 3 free remixesâ€”upgrade for unlimited!">
    <meta property="og:title" content="NextLogicAI - AI Content Rewriter">
    <meta property="og:description" content="Rewrite content into tweets, emails, ads, LinkedIn posts & more with AI. Start free!">
    <meta property="og:image" content="https://res.cloudinary.com/dvovudqsd/image/upload/v1760056331/og-logo.png"> <!-- Placeholder until logo.png is available -->
    <meta property="og:url" content="https://www.nextlogicai.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://res.cloudinary.com/dvovudqsd/image/upload/v1760056331/og-logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=AWmRTgcykKse3vRZKXfJlQCRfUm28rXIXfB6OL9HoOuqQJPz89ocFVkkvb-mS1qnNTgldHrVb6D98X6i&vault=true&intent=subscription" data-sdk-integration-source="button-factory"></script>
</head>
<body class="bg-gradient-to-br from-purple-600 via-pink-500 to-orange-400 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header Section -->
        <div class="text-center mb-12">
            <img src="" alt="NextLogicAI Logo" class="mx-auto h-36 w-auto mb-4" onerror="this.src='https://res.cloudinary.com/dvovudqsd/image/upload/v1760056331/og-logo.png';">
            <p class="text-xl font-medium">Transform your content with AI-powered rewriting</p>
            <div class="mt-4 inline-block bg-white/20 backdrop-blur-sm rounded-full px-6 py-2">
                <p class="font-semibold" id="uses-counter">3 free remixes left</p>
            </div>
        </div>

        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
            <div class="grid md:grid-cols-2 gap-0">
                <div class="p-8 bg-gradient-to-br from-gray-50 to-gray-100">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800">Your Original Content</h2>
                    <textarea id="input-text" placeholder="Paste your blog post, rant, idea, or anything here..." class="w-full h-64 p-4 border-2 border-gray-300 rounded-xl resize-none focus:border-purple-500 focus:outline-none text-gray-700 text-sm"></textarea>
                    
                    <div class="mt-6">
                        <label class="block text-sm font-bold text-gray-700 mb-3">Transform it into:</label>
                        <div class="space-y-2">
                            <button onclick="selectType('tweet')" id="btn-tweet" class="w-full p-3 rounded-xl text-left bg-purple-600 text-white shadow-lg">
                                <div class="font-semibold">Twitter Thread</div>
                                <div class="text-sm opacity-90">Punchy, engaging tweets</div>
                            </button>
                            <button onclick="selectType('email')" id="btn-email" class="w-full p-3 rounded-xl text-left bg-white text-gray-700 hover:bg-gray-100">
                                <div class="font-semibold">ðŸ“¨ Professional Email</div>
                                <div class="text-sm text-gray-500">Clear, polished tone</div>
                            </button>
                            <button onclick="selectType('ad')" id="btn-ad" class="w-full p-3 rounded-xl text-left bg-white text-gray-700 hover:bg-gray-100">
                                <div class="font-semibold">ðŸ“£ Ad Copy</div>
                                <div class="text-sm text-gray-500">Persuasive and catchy</div>
                            </button>
                            <button onclick="selectType('linkedin')" id="btn-linkedin" class="w-full p-3 rounded-xl text-left bg-white text-gray-700 hover:bg-gray-100">
                                <div class="font-semibold">ðŸ’¼ LinkedIn Post</div>
                                <div class="text-sm text-gray-500">Professional insights</div>
                            </button>                  
                        </div>
                    </div>

                    <button onclick="doRemix()" id="remix-btn" class="w-full mt-6 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold py-4 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all shadow-xl">
                        Remix It Now
                    </button>
                </div>
                <div class="p-8 bg-white">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800">Your Remixed Content</h2>
                    <div id="output-text" class="w-full h-64 p-4 bg-gray-50 rounded-xl overflow-auto border-2 border-gray-200 text-gray-700 text-sm leading-relaxed">
                        Your remixed content will appear here...
                    </div>

                    <button onclick="doCopy()" id="copy-btn" class="w-full mt-4 bg-green-500 text-white font-bold py-3 rounded-xl hover:bg-green-600 transition-all hidden">
                        Copy to Clipboard
                    </button>
                </div>
            </div>
        </div>
        <div id="paywall" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 hidden">
            <div class="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl">
                <div class="text-center">
                    <div class="w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-3xl">âœ¨</span>
                    </div>
                    <h2 class="text-3xl font-black mb-4 text-gray-800">Unlock Unlimited Remixes</h2>
                    <p class="text-gray-600 mb-6">You have used all your free tries! Upgrade to keep remixing unlimited content.</p>
                    <div id="paypal-button-container-P-9H3223433Y203091RNDQKUSI"></div>
                    <button onclick="closePaywall()" class="w-full text-gray-600 py-2 hover:text-gray-800 mt-4">Maybe later</button>
                </div>
            </div>
        </div>
        <div class="text-center mt-8 text-white/80 text-sm">
            <p>Â© 2025</p>
        </div>
    </div>

    <script>
        let usesLeft = 3;
        let isPaid = false;
        let currentType = 'tweet';
        let paypalButton;

        if (localStorage.getItem('usesLeft')) usesLeft = parseInt(localStorage.getItem('usesLeft'));
        if (localStorage.getItem('isPaid') === 'true') isPaid = true;

        function updateCounter() {
            const counter = document.getElementById('uses-counter');
            if (counter) {
                counter.textContent = isPaid ? 'Unlimited remixes' : (usesLeft > 0 ? `${usesLeft} free remixes left` : 'Upgrade for unlimited');
            }
        }
        updateCounter();

        function selectType(type) {
            currentType = type;
            const btns = ['tweet', 'email', 'ad', 'linkedin']; // Add more as needed
            btns.forEach(btnId => {
                const btn = document.getElementById(`btn-${btnId}`);
                if (btn) btn.className = btnId === type ? 'w-full p-3 rounded-xl text-left bg-purple-600 text-white shadow-lg' : 'w-full p-3 rounded-xl text-left bg-white text-gray-700 hover:bg-gray-100';
            });
        }

        function doRemix() {
            if (!isPaid && usesLeft <= 0) {
                showPaywall();
                return;
            }

            const input = document.getElementById('input-text').value.trim();
            if (!input) {
                alert('Please paste some text first!');
                return;
            }

            const btn = document.getElementById('remix-btn');
            btn.disabled = true;
            btn.textContent = 'Remixing...';

            const prompts = {
                'tweet': 'Rewrite this as 3-5 engaging tweets:\n\n',
                'email': 'Rewrite this as a professional email:\n\n',
                'ad': 'Rewrite this as ad copy:\n\n',
                'linkedin': 'Rewrite this as a LinkedIn post:\n\n'
                // Add more types as needed
            };
            const selectedPrompt = (prompts[currentType] || prompts['tweet']) + input;

            const apiUrl = 'https://remixback.onrender.com/remixback';
            const xhr = new XMLHttpRequest();
            xhr.open('POST', apiUrl, true);
            xhr.setRequestHeader('Content-Type', 'application/json');

            xhr.onreadystatechange = function() {
                console.log('ReadyState:', xhr.readyState, 'Status:', xhr.status);
                if (xhr.readyState === 4) {
                    console.log('Response:', xhr.responseText);
                    if (xhr.status === 200) {
                        try {
                            const data = JSON.parse(xhr.responseText);
                            document.getElementById('output-text').textContent = data.output || 'No output received';
                            document.getElementById('copy-btn').classList.remove('hidden');
                            if (!isPaid) {
                                usesLeft--;
                                localStorage.setItem('usesLeft', usesLeft);
                                updateCounter();
                            }
                        } catch (e) {
                            console.error('Parse Error:', e);
                            alert('Failed to process API response');
                        }
                    } else {
                        alert(`Error: ${xhr.status} - ${xhr.responseText || 'Server issue'}`);
                    }
                    btn.disabled = false;
                    btn.textContent = 'Remix It Now';
                }
            };

            xhr.send(JSON.stringify({ prompt: selectedPrompt }));
        }

        function doCopy() {
            const text = document.getElementById('output-text').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.getElementById('copy-btn');
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy to Clipboard', 2000);
            });
        }

        function showPaywall() {
            document.getElementById('paywall').classList.remove('hidden');
            if (typeof paypal !== 'undefined' && !paypalButton) {
                paypalButton = paypal.Buttons({
                    style: { shape: 'pill', color: 'silver', layout: 'vertical', label: 'subscribe' },
                    createSubscription: function(data, actions) {
                        console.log('Creating subscription with plan_id: P-9AN67037B58421011NDUDF2Y');
                        return actions.subscription.create({ plan_id: 'P-9AN67037B58421011NDUDF2Y' }); // Update with valid sandbox plan ID
                    },
                    onApprove: function(data, actions) {
                        console.log('Subscription approved with ID:', data.subscriptionID);
                        localStorage.setItem('isPaid', 'true');
                        localStorage.setItem('subscriptionID', data.subscriptionID);
                        isPaid = true;
                        updateCounter();
                        closePaywall();
                        alert('Welcome to Pro! You now have unlimited remixes!');
                    },
                    onError: function(err) {
                        console.error('PayPal Error:', err);
                        alert('Error with PayPal subscription: ' + (err.message || 'Unknown error. Please try again.'));
                    },
                    onCancel: function(data) {
                        console.log('Subscription canceled:', data);
                    }
                }).render('#paypal-button-container-P-9AN67037B58421011NDUDF2Y');
                console.log('PayPal button rendered');
            } else if (typeof paypal === 'undefined') {
                console.error('PayPal SDK not loaded');
                alert('PayPal is not loading. Please refresh or contact support.');
            }
        }

        function closePaywall() {
            document.getElementById('paywall').classList.add('hidden');
        }

        window.onload = function() {
            if (!isPaid && usesLeft <= 0) showPaywall();
        };
    </script>
</body>
</html>